
<head>
<%= javascript_include_tag 'freewall.js' %>
</head>
<div class="row nopadding">
	<div class="col-md-12">
	<div id="freewall" class="free-wall"></div>
	</div>
</div>
<script type="text/javascript">
	$(document).on('page:change',function() {
		$(".item").find("img").each( function() {
     		$(this).attr("href",$(this).attr("src"));
		});
	
  		$(".fancybox").fancybox();
	});

	var temp = "<div class='brick item' style='width:{width}px;'><img src='../assets/carousel/{index}.jpg' width='100%' class='fancybox'></div>";
	var w = 1, h = 1, html = '', limitItem = 30;
	for (var i = 0; i < limitItem; ++i) {
		w = 1 + 3 * Math.random() << 0;
		html += temp.replace(/\{width\}/g, w*160).replace("{index}", i + 1);
	}
	$("#freewall").html(html);

	var wall = new Freewall("#freewall");
	wall.reset({
		selector: '.brick',
		animate: true,
		cellW: 150,
		cellH: 'auto',
		onResize: function() {
			wall.fitWidth();
		}
	});

	var images = wall.container.find('.brick');
	images.find('img').load(function() {
		wall.fitWidth();
	});

</script>
</html>